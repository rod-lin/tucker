module Tucker.Std where

import Data.Int
import Data.Hex
import Data.Word
import Data.Char
import qualified Data.ByteString as BSR
import qualified Data.ByteString.Char8 as BS
import Crypto.PubKey.ECC.Types

import Tucker.Enc
import Tucker.Conf

data BTCNetwork = BTCNetwork {
        wifPref :: Word8,
        pubPref :: Word8,
        magicNo :: ByteString,
        listenPort :: Word16,

        genesisRaw :: ByteString -- genesis hash
    } deriving (Show, Read, Eq)

btc_curve = getCurveByName SEC_p256k1

btc_mainnet =
    BTCNetwork {
        wifPref = 0x80,
        pubPref = 0x00,
        magicNo = BSR.pack [ 0xf9, 0xbe, 0xb4, 0xd9 ],
        listenPort = 8333,

        genesisRaw = BS.pack $ (!! 0) $ unhex "0100000000000000000000000000000000000000000000000000000000000000000000003BA3EDFD7A7B12B27AC72C3E67768F617FC81BC3888A51323A9FB8AA4B1E5E4A29AB5F49FFFF001D1DAC2B7C0101000000010000000000000000000000000000000000000000000000000000000000000000FFFFFFFF4D04FFFF001D0104455468652054696D65732030332F4A616E2F32303039204368616E63656C6C6F72206F6E206272696E6B206F66207365636F6E64206261696C6F757420666F722062616E6B73FFFFFFFF0100F2052A01000000434104678AFDB0FE5548271967F1A67130B7105CD6A828E03909A67962E0EA1F61DEB649F6BC3F4CEF38C4F35504E51EC112DE5C384DF7BA0B8D578A4C702B6BF11D5FAC00000000"
    }

btc_testnet3 =
    BTCNetwork {
        wifPref = 0xef,
        pubPref = 0x6f,
        magicNo = BSR.pack [ 0x0b, 0x11, 0x09, 0x07 ],
        listenPort = 18333,

        genesisRaw = BS.pack $ (!! 0) $ unhex "0100000000000000000000000000000000000000000000000000000000000000000000003BA3EDFD7A7B12B27AC72C3E67768F617FC81BC3888A51323A9FB8AA4B1E5E4ADAE5494DFFFF001D1AA4AE180101000000010000000000000000000000000000000000000000000000000000000000000000FFFFFFFF4D04FFFF001D0104455468652054696D65732030332F4A616E2F32303039204368616E63656C6C6F72206F6E206272696E6B206F66207365636F6E64206261696C6F757420666F722062616E6B73FFFFFFFF0100F2052A01000000434104678AFDB0FE5548271967F1A67130B7105CD6A828E03909A67962E0EA1F61DEB649F6BC3F4CEF38C4F35504E51EC112DE5C384DF7BA0B8D578A4C702B6BF11D5FAC00000000"
    }

-- btc_cli_port = 8333 :: Word16

data BTCServiceTypeSingle = BTC_NODE_NETWORK | BTC_NODE_GETUTXO | BTC_NODE_BLOOM deriving (Show, Eq)
data BTCServiceType = BTCServiceType [BTCServiceTypeSingle] deriving (Show, Eq)

btc_cli_service = BTCServiceType [ BTC_NODE_NETWORK ]

btc_version :: Integral t => t
btc_version = 60002

btc_user_agent = "/Tucker:" ++ tucker_version ++ "/"
